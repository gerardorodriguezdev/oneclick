CREATE TABLE IF NOT EXISTS devices (
    room_id CHAR(36) REFERENCES rooms(room_id) ON DELETE CASCADE,
    device_id CHAR(36) PRIMARY KEY,
    device JSON NOT NULL
);

CREATE INDEX IF NOT EXISTS devices_room_id_idx ON devices(room_id);

deleteByDeviceId:
DELETE FROM devices WHERE device_id = ?;