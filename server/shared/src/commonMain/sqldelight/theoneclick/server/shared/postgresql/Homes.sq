CREATE TABLE IF NOT EXISTS homes (
    user_id CHAR(36) REFERENCES users(user_id) ON DELETE CASCADE,
    home_id CHAR(36) PRIMARY KEY,
    home_name VARCHAR(20) NOT NULL
);

CREATE INDEX IF NOT EXISTS homes_user_id_idx ON homes(user_id);

homesByUserId:
SELECT *
FROM homes
JOIN rooms ON homes.home_id = rooms.home_id
JOIN devices ON rooms.room_id = devices.room_id
WHERE homes.user_id = ? LIMIT ? OFFSET ?;

totalHomes:
SELECT COUNT(*) FROM homes;